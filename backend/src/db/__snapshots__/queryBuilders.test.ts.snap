// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`attachConnection should modify root query 1`] = `"with \\"regions_connection\\" as (select \\"regions\\".\\"id\\", \\"regions\\".\\"name\\" from \\"regions\\") select \\"source\\".\\"id\\", \\"sources\\".\\"name\\", (with \\"regions_connection_internal\\" as (select \\"regions_connection\\".*, count(regions_connection.*) OVER() from \\"regions_connection\\" where \\"regions_connection\\".\\"source_id\\" = \\"source\\".\\"id\\") select json_build_object('count', (select \\"regions_connection_internal\\".\\"count\\" from \\"regions_connection_internal\\" limit 1), 'nodes', (select json_agg(regions_connection_internal.*) from \\"regions_connection_internal\\"))) as regions from \\"sources\\""`;

exports[`attachConnection should query ids if nodes are not required 1`] = `"with \\"regions_connection\\" as (select \\"regions\\".\\"id\\" from \\"regions\\") select \\"source\\".\\"id\\", \\"sources\\".\\"name\\", (with \\"regions_connection_internal\\" as (select \\"regions_connection\\".*, count(regions_connection.*) OVER() from \\"regions_connection\\" where \\"regions_connection\\".\\"source_id\\" = \\"source\\".\\"id\\") select json_build_object('count', (select count(\\"regions_connection_internal\\".*) from \\"regions_connection_internal\\"))) as regions from \\"sources\\""`;

exports[`buildConnectionColumn should build simple connection field select 1`] = `"with \\"tbl_internal\\" as (select \\"tbl\\".*, count(tbl.*) OVER() from \\"tbl\\" where \\"tbl\\".\\"fk\\" = \\"src\\".\\"id\\") select json_build_object('count', (select \\"tbl_internal\\".\\"count\\" from \\"tbl_internal\\" limit 1), 'nodes', (select json_agg(tbl_internal.*) from \\"tbl_internal\\"))"`;

exports[`buildConnectionColumn should include limit and offset 1`] = `"with \\"tbl_internal\\" as (select \\"tbl\\".*, count(tbl.*) OVER() from \\"tbl\\" where \\"tbl\\".\\"fk\\" = \\"src\\".\\"id\\" limit 10 offset 20) select json_build_object('count', (select \\"tbl_internal\\".\\"count\\" from \\"tbl_internal\\" limit 1), 'nodes', (select json_agg(tbl_internal.*) from \\"tbl_internal\\"))"`;

exports[`buildConnectionJSONQuery should build correct sql with nodes 1`] = `"select json_build_object('count', (select \\"regions_connection_internal\\".\\"count\\" from \\"regions_connection_internal\\" limit 1), 'nodes', (select json_agg(regions_connection_internal.*) from \\"regions_connection_internal\\"))"`;

exports[`buildConnectionJSONQuery should build correct sql without nodes 1`] = `"select json_build_object('count', (select count(\\"regions_connection_internal\\".*) from \\"regions_connection_internal\\"))"`;

exports[`buildRootQuery should attach connections 1`] = `"with \\"c_connection\\" as (select * from \\"k\\") select \\"tbl\\".\\"b\\", (with \\"c_connection_internal\\" as (select \\"c_connection\\".*, count(c_connection.*) OVER() from \\"c_connection\\" where \\"c_connection\\".\\"fk\\" = \\"tbl\\".\\"id\\") select json_build_object('count', (select count(\\"c_connection_internal\\".*) from \\"c_connection_internal\\"))) as c from \\"tbl\\""`;

exports[`getPrimitives should match snapshot 1`] = `
Array [
  "tablename.camel_case",
  "tablename.snake_case",
  "tablename.regular",
  "tablename.everyone",
]
`;
