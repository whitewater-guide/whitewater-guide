type Region {
  id: ID!
  name: String!
  description: String
  season: String
  seasonNumeric: [Int]!
  bounds: [[Float!]]
  pois: [Point]!
  createdAt: Date
  updatedAt: Date
  rivers: RegionRiverConnection!
  gauges: RegionGaugeConnection!
  # sources: [Source]!

  # Pagination not supported yet, so use only for count!
  sections: RegionSectionConnection!

  # Only admins and editors can see this
  hidden: Boolean @auth(requires: EDITOR, anyMember: true)
  premium: Boolean
}

type RegionRiverConnection {
  nodes: [River]!
  count: Int!
}

type RegionGaugeConnection {
  nodes: [Gauge]!
  count: Int!
}

type RegionSectionConnection {
  nodes: [Section]!
  count: Int!
}

input RegionInput {
  id: ID
  name: String!
  description: String
  season: String
  seasonNumeric: [Int]
  pois: [PointInput]
  bounds: [[Float!]]
}

input RegionAdminSettings {
  hidden: Boolean!
  premium: Boolean!
}

type RegionsList {
  nodes: [Region]!
  count: Int!
}

type Query {
  regions(page: Page): RegionsList!
  region(id: ID): Region
  regionEditors(regionId: ID!): [User!] @auth(requires: ADMIN)
}

type Mutation {
  upsertRegion(region: RegionInput!): Region @auth(requires: EDITOR)
  removeRegion(id: ID!): ID @auth(requires: ADMIN)
  addEditor(regionId: ID!, userId: ID!): Boolean @auth(requires: ADMIN)
  removeEditor(regionId: ID!, userId: ID!): Boolean @auth(requires: ADMIN)
  administrateRegion(regionId: ID!, settings: RegionAdminSettings!): Region @auth(requires: ADMIN)
}
