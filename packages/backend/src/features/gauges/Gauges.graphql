type Gauge {
  id: ID!
  name: String!
  code: String!
  location: Point
  levelUnit: String
  flowUnit: String
  requestParams: JSON @auth(requires: ADMIN)
  cron: String @auth(requires: ADMIN)

  url: String
  enabled: Boolean
  createdAt: Date
  updatedAt: Date

  lastMeasurement: Measurement
  status: HarvestStatus

  source: Source!
}

input GaugeInput {
  id: ID
  source: RefInput!
  name: String!
  code: String!
  location: PointInput
  levelUnit: String
  flowUnit: String
  requestParams: JSON
  cron: String
  url: String
}

type GaugesList {
  nodes: [Gauge]!
  count: Int!
}

type Query {
  gauges(sourceId: ID, page: Page): GaugesList!
  gauge(id: ID): Gauge
}

type Mutation {
  upsertGauge(gauge:GaugeInput!): Gauge @auth(requires: ADMIN)
  removeGauge(id: ID!): ID @auth(requires: ADMIN)
  toggleGauge(id: ID!, enabled: Boolean!): Gauge @auth(requires: ADMIN)
  toggleAllGauges(sourceId: ID!, enabled: Boolean!): [Gauge] @auth(requires: ADMIN)
}
