type Gauge {
  # Unique ID
  id: ID!
  # Human-friendly name
  name: String!
  # Unique code from upsteam, or synthetic code if not provided
  code: String!
  # Gauge location
  location: Point
  # Level unit (e.g. m, inches), or null if gauge doesn't measure levels
  levelUnit: String
  # Flow unit (e.g. m3/s, cfs), or null if gauge doesn't measure flows
  flowUnit: String
  # Arbitrary upstream request params
  requestParams: JSON @admin
  # Crosn schedule
  cron: String @admin

  # Gauge web page
  url: String
  # Is gauge being harvested?
  enabled: Boolean
  # Creation date (in whitewater.guide)
  createdAt: Date
  # Updated date (in whitewater.guide)
  updatedAt: Date

  # Last known gauge measurements
  lastMeasurement: Measurement
  # Last known harvest result
  status: HarvestStatus

  # Gauge's data source
  source: Source!
}

input GaugeInput {
  id: ID
  source: RefInput!
  name: String!
  code: String!
  location: PointInput
  levelUnit: String
  flowUnit: String
  requestParams: JSON
  cron: String
  url: String
}

type GaugesList {
  nodes: [Gauge]!
  count: Int!
}

type Query {
  gauges(sourceId: ID, page: Page): GaugesList!
  gauge(id: ID): Gauge
}

type Mutation {
  upsertGauge(gauge:GaugeInput!): Gauge @admin
  removeGauge(id: ID!): ID @admin
  toggleGauge(id: ID!, enabled: Boolean!): Gauge @admin
  toggleAllGauges(sourceId: ID!, enabled: Boolean!): [Gauge] @admin
}
